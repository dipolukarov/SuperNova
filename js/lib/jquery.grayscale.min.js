function grayscale(a){var h=document.createElement("canvas");var j=h.getContext("2d");var c=new Image();c.src=a;h.width=c.width;h.height=c.height;j.drawImage(c,0,0);var g=j.getImageData(0,0,h.width,h.height);for(var e=0;e<g.height;e++){for(var f=0;f<g.width;f++){var d=(e*4)*g.width+f*4;var b=(g.data[d]+g.data[d+1]+g.data[d+2])/3;g.data[d]=b;g.data[d+1]=b;g.data[d+2]=b}}j.putImageData(g,0,0,0,0,g.width,g.height);return h.toDataURL()}(function(a){a.fn.grayScale=function(){var b=a(this);var c=b.attr("src");b.attr("src",grayscale(c))}})(jQuery);