if(typeof(window.LOADED_GLOBAL)==="undefined"){var LOADED_GLOBAL=true;var CLASS_POSITIVE="positive";var language={};var x="";var e=null;var sn_inframe;$.fn.__tabs=$.fn.tabs;$.fn.tabs=function(h,g,m,l,k,j){var i=window.location.href.replace(/#.*$/,"");$('ul > li > a[href^="#"]',this).each(function(){var a=$(this).attr("href");$(this).attr("href",i+a)});return $(this).__tabs(h,g,m,l,k,j)};Math.intVal=function(b){var a=parseInt(b);return a?a:0};Math.floatVal=function(b){var a=parseFloat(b);return a?a:0};Math.roundVal=function(a){return Math.round(Math.floatVal(a))};Math.floorVal=function(a){return Math.floor(Math.floatVal(a))};Math.ceilVal=function(a){return Math.ceil(Math.floatVal(a))};Math.percent=function(b,a,c){!c?c=1:false;return a?Math.round((b/a*100*c)/c):0};Math.percentPixels=function(b,a,c){return a?Math.round((c<0?-c:0)+(b/a*c))+"px":0};function getFrameName(b){for(var a=0;a<parent.frames.length;a++){if(parent.frames[a]===b){return(parent.frames[a].name)}}}sn_inframe=window.frameElement?getFrameName(self):false;function sn_blink(a){a=$(a);a.animate({opacity:a.css("opacity")==0?1:0},a.attr("duration")?parseInt(a.attr("duration")):1000,function(){sn_blink(this)})}var sn_delay=function(b,c){var a=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return b.apply(null,a)},c)};String.prototype.format=function(){var a=arguments;return this.replace(/\{\{|\}\}|\{(\d+)\}/g,function(b,c){if(b=="{{"){return"{"}if(b=="}}"){return"}"}return a[c]})};function skinInputs(){var a=jQuery("input:not(.do-not-skin),button:not(.do-not-skin)");a.filter(":button, :submit, :reset").button();a.filter(":text, :password, :file").button().addClass("ui-textfield ui-input-text").off("keydown");a.filter(":radio").addClass("ui-corner-all ui-state-default ui-textfield");jQuery("button:not(.do-not-skin)").button().addClass("ui-textfield");jQuery("textarea:not(#ally_text):not(.do-not-skin)").button().addClass("ui-textfield ui-input-text").off("keydown")}function makeBlink(){if(!jQuery.fx.off){jQuery(".blink").each(function(){sn_blink(this)})}}function document_ready(){var a=$("body");skinInputs();if(typeof(sn_timer)==="function"){sn_timer()}$("#font_minus, #font_normal, #font_plus").on("click",function(){var b=snFont.size;switch($(this).attr("id")){case"font_plus":snFont.size+=snFont.step;break;case"font_minus":snFont.size-=snFont.step;break;default:snFont.size=snFont.sizeDefaultPercent;break}snFont.size=Math.min(snFont.size,snFont.max);snFont.size=Math.max(snFont.size,snFont.min);var c=Math.floatVal(a.css("font-size"))*snFont.size/b;if(b!=snFont.size){a.css("font-size",c+"px")}jQuery.post("time_probe.php",{font_size:snFont.size+"%"},function(d){})});makeBlink()}$(".password_show").on("click",function(){var a,b,c;b=$(this).parent().find("[name="+$(this).attr("show_element")+"]").hide();if(b.attr("type")=="password"){c="text";a=L_sys_login_password_hide}else{c="password";a=L_sys_login_password_show}var d=$('<input type="'+c+'" maxlength="32" />').attr("name",b.attr("name")).attr("class",b.attr("class")).val(b.val()).insertBefore(b);d.attr("id",b.attr("id"));b.remove();$(this).attr("value",a)});function sn_redirect(a){document.location.assign(a)}function sn_reload(){location.reload()}jQuery("[news_toggle]").on("click",function(){$("#news_"+$(this).attr("news_toggle")).show();$(this).remove()});jQuery(".survey_block [survey_id]").on("click",function(){var a=$(this).attr("survey_id");$(".survey_block [survey_id="+a+"]").removeClass("button_pseudo_pressed");$(this).addClass("button_pseudo_pressed");$('input:radio[name="survey['+a+']"]').val([$(this).attr("answer_id")])});jQuery(".button_pseudo").on("click",function(){$(this).addClass("button_pseudo_pressed")});jQuery("#sort_elements,#sort_elements_inverse").on("change",function(){jQuery.post($("#page_file_name").val()+"?mode="+$("#mode").val()+"&sort_elements="+$("#sort_elements").val()+"&sort_elements_inverse="+($("#sort_elements_inverse").is(":checked")?"1":"0"),function(){sn_reload()})});jQuery(document).on("click",".player_nick_award",function(a){document.location.assign("index.php?page=imperator&int_user_id="+jQuery(this).attr("player_id"))});jQuery(document).on("click",".player_nick_race",function(a){document.location.assign("index.php?page=races")});jQuery(document).on("click","button[href]",function(a){sn_redirect($(this).attr("href"))});jQuery(document).on("change","#empire_overview select[selector]",function(){if(jQuery(this).val()!="-"){jQuery("select[name^='percent["+jQuery(this).attr("selector")+"][']").val(jQuery(this).val())}});jQuery(document).on("click","input:button[id$='_ai_zero']",function(a,b){jQuery("#"+jQuery(this).attr("parent_id")).val(0).trigger("change",[a,b])});jQuery(document).on("click","input:button[id$='ai_max']",function(b,c){var a="#"+jQuery(this).attr("parent_id");jQuery(a).val(parseInt(jQuery(a+"slide").slider("option","max"))).trigger("change",[b,c])});jQuery(document).on("mousedown","input:button[id$='ai_dec'],input:button[id$='ai_inc']",function(d,f){var c=jQuery(this);var a=jQuery("#"+c.attr("parent_id"));if(a.is("[disabled]")||a.is("[slider_ticks]")){return}var b=jQuery("#"+c.attr("parent_id")+"slide");a.attr("slider_ticks",0).attr("step_now",b.slider("option","step")).attr("increase",c.attr("id")==a.attr("id")+"_ai_inc"?1:-1);sn_ainput_mouselerate_jquery()}).on("mouseup","input:button[id$='ai_dec'],input:button[id$='ai_inc']",function(b,c){var a=jQuery("#"+jQuery(this).attr("parent_id"));clearTimeout(a.attr("timeout"));a.removeAttr("slider_ticks").removeAttr("step_now").removeAttr("increase").removeAttr("timeout")});jQuery(document).on("keyup change","[ainput]",function(d,g){if(g!=undefined&&g.type=="slidechange"){return}var c,f,b,a;c=jQuery("#"+jQuery(this).attr("id")+"slide");f=(f=parseInt(jQuery(this).val()))?f:0;f=f>(a=parseInt(c.slider("option","max")))?a:(f<(b=parseInt(c.slider("option","min")))?b:f);jQuery(this).val(f);c.slider("value",f)}).on("focus","[ainput]",function(a,b){if(this.value=="0"){this.value=""}this.select()}).on("blur","[ainput]",function(b,c){var a=jQuery(this);a.val(parseInt(a.val())?a.val():0)});jQuery(document).on("mouseup",function(a,b){jQuery("[slider_ticks]").each(function(){clearTimeout(jQuery(this).attr("timeout"));jQuery(this).removeAttr("slider_ticks").removeAttr("step_now").removeAttr("increase").removeAttr("timeout")});if(accelerated){clearTimeout(accelerated.timeout);accelerated=undefined}});jQuery(document).on("click","[go_url]",function(){if(jQuery(this).attr("target")=="_blank"){window.open(jQuery(this).attr("go_url"),"_blank")}else{document.location=jQuery(this).attr("go_url")}});function attr_on_me_or_parent(b,a){return parseInt(jQuery(b).attr(a)?jQuery(b).attr(a):jQuery(b).parent().attr(a))}jQuery(document).on("click","[go]",function(){var k=[],a,d,f;var c,i,b,j;var g=jQuery(this).attr("target");var h=jQuery(this).attr("go");switch(h){case"info":h="infos";break;case"flying":h="flying_fleets";break;case"phalanx":case"fleet":window.uni_galaxy?k.push("galaxy="+window.uni_galaxy):false;window.uni_system?k.push("system="+window.uni_system):false;(i=attr_on_me_or_parent(this,"planet_planet"))?k.push("planet="+i):false;(b=attr_on_me_or_parent(this,"planet_type"))?k.push("planettype="+b):false;(j=attr_on_me_or_parent(this,"mission"))?k.push("target_mission="+j):false;break;case"galaxy":window.uni_galaxy?k.push("galaxy="+window.uni_galaxy):false;(c=attr_on_me_or_parent(this,"planet_system"))?k.push("system="+c):false;break;case"build":h="buildings";break;case"res":h="resources";break;case"stat":(d=attr_on_me_or_parent(this,"who"))?k.push("who="+d):false;k.push("range="+attr_on_me_or_parent(this,"rank")+"#"+attr_on_me_or_parent(this,"rank"));break;case"imperator":h="index";k.push("page=imperator");k.push("int_user_id="+attr_on_me_or_parent(this,"user_id"));break;case"messages":k.push("id="+attr_on_me_or_parent(this,"user_id"));break;case"buddy":k.push("request_user_id="+attr_on_me_or_parent(this,"user_id"));break;case"alliance":k.push("a="+attr_on_me_or_parent(this,"ally_id"));break;default:h="overview"}(a=attr_on_me_or_parent(this,"planet_id"))?k.push("cp="+a):false;(d=jQuery(this).attr("mode"))?k.push("mode="+d):false;(f=attr_on_me_or_parent(this,"unit_id"))?k.push("gid="+f):false;f&&window.ALLY_ID!==undefined&&parseInt(ALLY_ID)?k.push("ally_id="+ALLY_ID):false;k=h+".php?"+k.join("&");g?window.open(k,g):(document.location=k);$(this).removeClass("button_pseudo_pressed")});jQuery(document).on("click",".unit_preview .icon_gather",function(){var a=$(this);document.location="fleet.php?fleet_page=5"+(typeof PLANET_ID!=="undefined"&&parseInt(PLANET_ID)?"&cp="+parseInt(PLANET_ID):"")+(parseFloat(a.attr("metal"))?"&metal="+parseFloat(a.attr("metal")):"")+(parseFloat(a.attr("crystal"))?"&crystal="+parseFloat(a.attr("crystal")):"")+(parseFloat(a.attr("deuterium"))?"&deuterium="+parseFloat(a.attr("deuterium")):"")});function sn_ainput_mouselerate_jquery(){jQuery("[slider_ticks]").each(function(){var i,h,b,g;var f=jQuery(this);var d=jQuery("#"+f.attr("id")+"slide");i=(i=parseInt(f.val()))?i:0;var a=parseInt(f.attr("step_now"));var c=i+a*parseInt(f.attr("increase"));c=c>(h=parseInt(d.slider("option","min")))?c:h;c=c<(b=parseInt(d.slider("option","max")))?c:b;if(i!=c){f.val(c).trigger("change");f.attr("slider_ticks",g=parseInt(f.attr("slider_ticks"))+1).attr("step_now",Math.round(a*(g%4==0?3:1)));f.attr("timeout",window.setTimeout(sn_ainput_mouselerate_jquery,g==1?700:250))}})}function sn_ainput_make_jquery(b,a){jQuery("ainput").each(function(){var c,m,n,k;var d=3;var i=jQuery(this);c=(c=i.attr("step"))?c:1;m=(m=i.val())?m:0;var f=i.attr("name");b=f.replace("[","").replace("]","");var l="#"+b;var h=b+"slide";var g="#"+h;var j='<table width="100%" class="markup">';j+="<tr>";if(!i.is("[disable_min]")){j+='<td width="3em"><input type="button" value="0" parent_id="'+b+'" id="'+b+'_ai_zero" style="width: 3em"></td>';d++}j+='<td width="3em"><input type="button" value="-" parent_id="'+b+'" id="'+b+'_ai_dec" style="width: 3em"></td>';j+='<td style="padding-right: 2.25em;"><input type="text" ainput="true" value="0" id="'+b+'" style="width: 100%;" name="'+f+'" /></td>';j+='<td width="3em"><input type="button" value="+" parent_id="'+b+'" id="'+b+'_ai_inc"  style="width: 3em"></td>';if(!i.is("[disable_max]")){j+='<td width="3em"><input type="button" value="M" parent_id="'+b+'" id="'+b+'_ai_max"  style="width: 3em"></td>';d++}j+="</tr>";j+='<tr><td colspan="'+d+'"><div parent_id="'+b+'" id="'+h+'"></div></td></tr>';j+="</table>";jQuery(j).insertBefore(i);i.remove();jQuery("#"+b).val(m);jQuery(g).slider({range:"min",value:m,min:(n=i.attr("min"))?n:0,max:(k=i.attr("max"))?k:0,step:1,slide:function(o,p){jQuery("#"+jQuery(this).attr("parent_id")).val(p.value).trigger("change",[o,p])},change:function(o,p){jQuery("#"+jQuery(this).attr("parent_id")).val(p.value).trigger("change",[o,p])}})})}var accelerated;function sn_ainput_make(f,i){var j=i.min?i.min:0;var g=i.max?i.max:0;var a=i.step?i.step:1;var h=i.value?i.value:j;var b=3;var c=f;f=f.replace("[","").replace("]","");var d="#"+f+"slide";document.write('<table width="100%" class="markup">');document.write("<tr>");if(i.button_zero){document.write('<td><input type="button" value="0" id="'+f+'zero" style="max-width: 31px"></td>');b++}document.write('<td><input type="button" value="-" id="'+f+'dec" style="max-width: 31px"></td>');document.write('<td><input type="text" value="0" id="'+f+'" style="width: 80%;" name="'+c+"\" onfocus=\"if(this.value == '0') this.value='';\" onblur=\"if(this.value == '') this.value='0';\"/></td>");document.write('<td><input type="button" value="+" id="'+f+'inc"  style="max-width: 31px"></td>');if(i.button_max){document.write('<td><input type="button" value="M" id="'+f+'max"  style="max-width: 31px"></td>');b++}document.write("</tr>");document.write('<tr><td colspan="'+b+'"><div id="'+f+'slide"></div></td></tr>');document.write("</table>");jQuery(d).slider({range:"min",value:h,min:j,max:g,step:1,slide:function(k,l){jQuery("#"+f).val(l.value).trigger("change",[k,l])},change:function(k,l){jQuery("#"+f).val(l.value).trigger("change",[k,l])}});jQuery("#"+f).val(jQuery(d).slider("value"));jQuery("#"+f).on("keyup change",function(k,l){if(l!=undefined&&l.type=="slidechange"){return}value=parseInt(jQuery(this).val());value=value?value:0;slider=jQuery(d);if(value>parseInt(slider.slider("option","max"))){jQuery(this).val(slider.slider("option","max"))}if(value<parseInt(slider.slider("option","min"))){jQuery(this).val(slider.slider("option","min"))}slider.slider("value",value)}).button().addClass("ui-textfield");jQuery("#"+f+"zero").on("click",function(k,l){jQuery("#"+f).val(0).trigger("change",[k,l])}).button();jQuery("#"+f+"max").on("click",function(k,l){jQuery("#"+f).val(jQuery(d).slider("option","max")).trigger("change",[k,l])}).button();jQuery("#"+f+"dec, #"+f+"inc").on("mousedown",function(l,m){var k=jQuery("#"+f);if(k.is("[disabled]")){return}accelerated={element:k,step:a,slider:d,ticks:0,step_now:a,timeout:0,increase:$(this).attr("id")==f+"inc"};sn_ainput_mouselerate()}).on("mouseup",function(k,l){if(accelerated){clearTimeout(accelerated.timeout);accelerated=undefined}}).button()}function sn_ainput_mouselerate(){var a=false;if(accelerated.increase&&(val=parseInt(accelerated.element.val()))<(option_max=jQuery(accelerated.slider).slider("option","max"))){a=val+accelerated.step_now<option_max;accelerated.element.val(a?val+accelerated.step_now:option_max).trigger("change")}if(!accelerated.increase&&(val=parseInt(accelerated.element.val()))>0){a=val-accelerated.step_now>0;accelerated.element.val(a?val-accelerated.step_now:0).trigger("change")}if(a){accelerated.ticks++;if(accelerated.ticks%3==0){accelerated.step_now=accelerated.step_now*2}accelerated.timeout=window.setTimeout(sn_ainput_mouselerate,200)}}var popup=jQuery(document.createElement("span"));var popupIsOpen=false;popup.dialog({autoOpen:false});popup.mouseleave(function(){popup_hide()});function popup_hide(){$("[popup_opened_here]").removeAttr("popup_opened_here");popup.dialog("close");popupIsOpen=false}function popup_show(a,c,b){popup_hide();popup.dialog("option","width",b?b:"auto");popup.dialog("option","position",c?c:{my:"center",at:"center",of:window});popup.html(a);popup.dialog("open");popupIsOpen=true}function sn_probe_style(a,b){switch(b){case"border-top-color":if(a.currentStyle){return a.currentStyle.borderTopColor}if(document.defaultView){return document.defaultView.getComputedStyle(a,"").getPropertyValue("border-top-color")}break}return false}function sn_show_hide(b,c){var a=jQuery("#"+c);var d=a[0].tagName;a.css("display",a.css("display")=="none"?(d=="TR"?"table-row":(d=="UL"||d=="DIV"?"block":"inline")):"none");jQuery(b).html("[&nbsp;"+(a.css("display")=="none"?LA_sys_show:LA_sys_hide)+"&nbsp;]")}function cntchar(a){if(window.document.forms[0].text.value.length>a){window.document.forms[0].text.value=x}else{x=window.document.forms[0].text.value}if(e==null){e=document.getElementById("cntChars")}else{e.childNodes[0].data=window.document.forms[0].text.value.length}}function numberGetCssClass(b,c,a){b=Math.floatVal(b);a=Math.floatVal(a);return Math.round(b-a)==0?"zero":((a>0&&a>b)||(a<=0&&-a<=b)?c:"negative")}function numberFormat(h,k,l){var m,f,a,n,g,d,c,b,o;k=Math.intVal(k);h=Math.round(Math.floatVal(h)*Math.pow(10,k))/Math.pow(10,k);if(h>0){m=h+""}else{m=(-h)+""}f=m.split(".");if(!f[0]){f[0]="0"}if(!f[1]){f[1]=""}if(f[1].length<k){a=f[1];for(g=f[1].length+1;g<=k;g++){a+="0"}f[1]=a}if(f[0].length>3){n=f[0];f[0]="";for(d=3;d<n.length;d+=3){c=n.slice(n.length-d,n.length-d+3);f[0]="."+c+f[0]+""}b=n.substr(0,(n.length%3==0)?3:(n.length%3));f[0]=b+f[0]}o=f[0]+(f[1]?","+f[1]:"");if(h<0){o="-"+o}else{if(h>0&&l){o="+"+o}}return o}function sn_format_number(f,d,g,c,b){var a=numberFormat(f,d,b);if(g){a='<span class="'+numberGetCssClass(f,g===true?CLASS_POSITIVE:g,c)+'">'+a+"</span>"}return a}function elementPrettyNumber(c,b,a){c.html(numberFormat(b)).removeClass("positive zero negative").addClass(numberGetCssClass(b,"positive",a))}function elementColorValue(a){a.html()}function elementIsEnabled(a){return $(a).is(":enabled")&&!($(this).attr("aria-disabled"))}function sn_timestampToString(c,b){var d="",a;!(c=parseInt(c))?c=0:false;if(b){a=Math.floor(c/(60*60*24));c-=a*60*60*24;d+=(a>0?a+"d":"")}a=Math.floor(c/(60*60));c-=a*60*60;d+=(a<=9?"0":"")+a+":";a=Math.floor(c/60);c-=a*60;d+=(a<=9?"0":"")+a+":";d+=(c<=9?"0":"")+c;return d}function snDateToString(b,c,a){c===undefined?c=3:false;return(c&1?(c&4?b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2):b.toLocaleDateString()):"")+(c&3?(a?"&nbsp;":" "):"")+(c&2?b.toTimeString().substring(0,8):"")}}function snConfirm(c){!c?c={}:false;var a=$(c.that);var b=$.Deferred();$('<div><div class="sn-dialog-confirm">'+(c.message?c.message:(a.attr("message")?a.attr("message"):language.sys_confirm_action))+"</div></div>").dialog({modal:true,autoOpen:true,resizable:false,width:c.width?c.width:"40em",title:c.title?c.title:(a.attr("title")?a.attr("title"):language.sys_confirm_action_title),open:function(){var d=$(this).parent();d.find(".ui-dialog-titlebar").css("display","block");d.find(".ui-dialog-buttonpane button:last").focus()},buttons:{ok:{text:language.sys_confirm,"class":"ok",click:function(){var d=$(this).parent();d.find(":button:not(.ui-dialog-titlebar-close)").button("disable");$(this).dialog("close");b.resolve(true)}},cancel:{text:language.sys_cancel,click:function(){$(this).dialog("close");b.resolve(false)}}}});b.promise().then(function(d){!d?a.removeClass("button_pseudo_pressed"):false;if(d&&a.attr("href")){sn_redirect(a.attr("href"))}if(d&&a.prop("tagName")=="FORM"){a.prop("submitted",true).submit()}});return false};